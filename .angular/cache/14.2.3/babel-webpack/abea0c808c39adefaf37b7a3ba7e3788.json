{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { Publisher } from '../../interfaces/heroe.interface';\nimport { switchMap } from 'rxjs/operators';\nlet AgregarComponent = class AgregarComponent {\n  constructor(heroesService, router, activatedRoute, snackBar, matDialog) {\n    this.heroesService = heroesService;\n    this.router = router;\n    this.activatedRoute = activatedRoute;\n    this.snackBar = snackBar;\n    this.matDialog = matDialog;\n    this.publishers = [{\n      id: 'DC Comics',\n      desc: 'DC - Comics'\n    }, {\n      id: 'Marvel Comics',\n      desc: 'Marvel - Comics'\n    }];\n    this.heroe = {\n      superhero: '',\n      alter_ego: '',\n      characters: '',\n      first_appearance: '',\n      publisher: Publisher.DCComics,\n      alt_img: ''\n    };\n  }\n\n  ngOnInit() {\n    if (!this.router.url.includes('editar')) {\n      return;\n    }\n\n    this.activatedRoute.params.pipe(switchMap(({\n      id\n    }) => this.heroesService.getHeroeId(id))).subscribe(heroe => this.heroe = heroe);\n  }\n\n  guardar() {\n    if (this.heroe.superhero.trim().length === 0) {\n      return;\n    }\n\n    if (this.heroe.id) {\n      //actualizar\n      this.heroesService.updateHeroe(this.heroe).subscribe(heroe => this.mostrarSnackBar('El hÃ©roe ha sido actualizado'));\n    } else {\n      //Crear\n      this.heroesService.addHeroe(this.heroe).subscribe(heroe => {\n        this.router.navigate(['/heroes/editar', heroe.id]);\n        this.mostrarSnackBar('El registro se ha creado correctamente');\n      });\n    }\n  }\n\n  borrarHeroe() {\n    this.heroesService.deleteHeroe(this.heroe.id).subscribe(resp => {\n      this.router.navigate(['/heroes']);\n    });\n  }\n\n  mostrarSnackBar(mensaje) {\n    this.snackBar.open(mensaje, 'OK!', {\n      duration: 2500\n    });\n  }\n\n};\nAgregarComponent = __decorate([Component({\n  selector: 'app-agregar',\n  templateUrl: './agregar.component.html',\n  styles: [`\n      img {\n        width: 100%;\n      }\n    `]\n})], AgregarComponent);\nexport { AgregarComponent };","map":null,"metadata":{},"sourceType":"module"}